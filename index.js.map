{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["//У файлі pixabay-api.js зберігай функції для виконання HTTP-запитів:\n\n// getImagesByQuery(query, page). Ця функція повинна приймати два параметри query (пошукове слово, яке є рядком) та page (номер сторінки, яка є числом), здійснювати HTTP-запит і повертати значення властивості data з отриманої відповіді.\nimport axios from 'axios';\nconst PIXABAY_API_KEY = '49602919-aeba24ff5374aa13ccf20c3b1';\nconst PIXABAY_API_URL = 'https://pixabay.com/api/';\nconst PIXABAY_PARAMS = {\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: 15,\n};\n\nexport async function getImagesByQuery(query, page) {\n  try {\n    const response = await axios.get(`${PIXABAY_API_URL}`, {\n      params: {\n        key: PIXABAY_API_KEY,\n        q: query,\n        image_type: PIXABAY_PARAMS.image_type,\n        orientation: PIXABAY_PARAMS.orientation,\n        safesearch: PIXABAY_PARAMS.safesearch,\n        page: page,\n        per_page: PIXABAY_PARAMS.per_page,\n      },\n    });\n    // console.log('response', response);\n    // console.log('totalHits', response.data.totalHits);\n    // console.log('page', response.config.params.page);\n    // console.log('per-page', response.config.params.per_page);\n    // console.log('total pages', countTotalPagesTest(response));\n    console.log('response_func', response);\n    // return response.data;\n    return {\n      data: response.data,\n      hits: response.data.hits,\n      totalPages: countTotalPagesTest(response),\n      page: response.config.params.page,\n    };\n  } catch (error) {\n    console.error('Error fetching data from Pixabay:', error);\n  } finally {\n  }\n}\n\nfunction countTotalPagesTest(data) {\n  const totalPages = Math.ceil(\n    data.data.totalHits / data.config.params.per_page\n  );\n  return totalPages;\n}\n","//У файлі render-functions.js створи екземпляр SimpleLightbox для роботи з модальним вікном та зберігай функції для відображення елементів інтерфейсу:\n\n//createGallery(images). Ця функція повинна приймати масив images, створювати HTML-розмітку для галереї, додавати її в контейнер галереї та викликати метод екземпляра SimpleLightbox refresh(). Нічого не повертає.\n// clearGallery(). Ця функція нічого не приймає та повинна очищати вміст контейнера галереї. Нічого не повертає.\n// showLoader(). Ця функція нічого не приймає, повинна додавати клас для відображення лоадера. Нічого не повертає.\n// hideLoader(). Ця функція нічого не приймає, повинна прибирати клас для відображення лоадера. Нічого не повертає.\n// showLoadMoreButton(). Ця функція нічого не приймає, повинна додавати клас для відображення кнопки Load more. Нічого не повертає.\n// hideLoadMoreButton(). Ця функція нічого не приймає, повинна прибирати клас для відображення кнопки Load more. Нічого не повертає.\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n// import { loader } from '../main';\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMore = document.querySelector('.load-more');\nexport async function createGallery(imagesPromise) {\n  try {\n    const items = await imagesPromise; // Ожидаем выполнения промиса\n    console.log('createGallery', items);\n    console.log('items', items.hits); // Логируем массив hits\n    const markup = items.hits // Извлекаем массив hits из ответа\n      .map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n        return `<li class=\"gallery-item\">\n                  <a href=\"${largeImageURL}\">\n                    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n                    <div class='item-footer'>\n                      <p><b>likes</b> ${likes}</p>\n                      <p><b>views</b> ${views}</p>\n                      <p><b>comments</b> ${comments}</p>\n                      <p><b>downloads</b> ${downloads}</p>\n                    </div>\n                  </a>\n                </li>`;\n      })\n      .join('');\n\n    gallery.innerHTML = markup; // Добавляем разметку в контейнер галереи\n    if (items.page === items.totalPages) {\n      hideLoadMoreButton(); // Скрываем кнопку \"Load more\", если достигли последней страницы\n    }\n    lightbox.refresh(); // Обновляем SimpleLightbox\n  } catch (error) {\n    console.error('Error creating gallery:', error); // Логируем ошибку, если что-то пошло не так\n  }\n}\nexport function clearGallery() {\n  gallery.innerHTML = '';\n  \n}\n\n\nexport function showLoader() {\n  loader.classList.remove('hidden-loader');\n  \n}\n\nexport function hideLoader() {\n  loader.classList.add('hidden-loader');\n}\nexport function showLoadMoreButton() {\n    loadMore.classList.remove('load-more-hidden');\n}\nexport function hideLoadMoreButton() {\n    loadMore.classList.add('load-more-hidden');\n}\nconst lightbox = new SimpleLightbox('.gallery a', {});","//У файлі main.js напиши всю логіку роботи додатка. Виклики нотифікацій iziToast, усі перевірки на довжину масиву в отриманій відповіді та логіку прокручування сторінки (scroll) робимо саме в цьому файлі. Імпортуй в нього функції із файлів pixabay-api.js та render-functions.js та викликай їх у відповідний момент.\n\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {\n  clearGallery,\n  createGallery,\n  hideLoader,\n  hideLoadMoreButton,\n  showLoader,\n  showLoadMoreButton,\n} from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nconst form = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.load-more');\nlet inputValue = null;\nlet page = null;\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  page = 1;\n  inputValue = form.elements['search-text'].value;\n  clearGallery();\n  if (inputValue === '') {\n    iziToast.error({\n      message: 'Please enter a search inputValue!',\n      position: 'topRight',\n      timeout: 2000,\n    });\n    return;\n  }\n  showLoader();\n  const data = getImagesByQuery(inputValue, page);\n  // const totalPages = await countTotalPages(data);\n  // console.log('total pages', totalPages);\n  // if (page === totalPages) {\n  //   hideLoadMoreButton();\n  // }\n  // console.log('DATA', await data);\n  data\n    .then(response => {\n      console.log('response!!!', response);\n      if (response.data.hits.length === 0) {\n        iziToast.error({\n          message:\n            'Sorry, there are no images matching your search inputValue. Please try again!',\n          position: 'topRight',\n          timeout: 2000,\n        });\n        return;\n      }\n      console.log('response_main', response);\n      createGallery(response);\n      showLoadMoreButton();\n    })\n    .catch(() => {\n      iziToast.error({\n        message: 'Error fetching data from Pixabay',\n        position: 'topCenter',\n        timeout: 3000,\n      });\n    })\n    .finally(() => {\n      hideLoader();\n    });\n  form.reset();\n  \n});\n\nloadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n\nasync function onLoadMoreBtnClick() {\n  page +=1;\n  console.log('click');\n  showLoader();\n  const data = await getImagesByQuery(inputValue, page);\n  createGallery(data);\n  hideLoader();\n}"],"names":["PIXABAY_API_KEY","PIXABAY_API_URL","PIXABAY_PARAMS","getImagesByQuery","query","page","response","axios","countTotalPagesTest","error","data","gallery","loader","loadMore","createGallery","imagesPromise","items","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","hideLoadMoreButton","lightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","SimpleLightbox","form","loadMoreBtn","inputValue","event","iziToast","onLoadMoreBtnClick"],"mappings":"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"}